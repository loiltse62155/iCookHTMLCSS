_satellite.pushAsyncScript(function(event, target, $variables){
  !function(){var e=function(){!function(e){if("undefined"==typeof t)var t={};if("undefined"==typeof i)var i={};if("undefined"==typeof a)var a={};if(a.radio||(a.radio={}),a.plugin||(a.plugin={}),"undefined"==typeof n)var n={};n.clock||(n.clock={}),function(e){"use strict";function t(e,t){var i=(65535&e)+(65535&t),a=(e>>16)+(t>>16)+(i>>16);return a<<16|65535&i}function i(e,t){return e<<t|e>>>32-t}function a(e,a,n,r,o,s){return t(i(t(t(a,e),t(r,s)),o),n)}function n(e,t,i,n,r,o,s){return a(t&i|~t&n,e,t,r,o,s)}function r(e,t,i,n,r,o,s){return a(t&n|i&~n,e,t,r,o,s)}function o(e,t,i,n,r,o,s){return a(t^i^n,e,t,r,o,s)}function s(e,t,i,n,r,o,s){return a(i^(t|~n),e,t,r,o,s)}function l(e,i){e[i>>5]|=128<<i%32,e[(i+64>>>9<<4)+14]=i;var a,l,h,c,d,p=1732584193,u=-271733879,_=-1732584194,g=271733878;for(a=0;a<e.length;a+=16)l=p,h=u,c=_,d=g,p=n(p,u,_,g,e[a],7,-680876936),g=n(g,p,u,_,e[a+1],12,-389564586),_=n(_,g,p,u,e[a+2],17,606105819),u=n(u,_,g,p,e[a+3],22,-1044525330),p=n(p,u,_,g,e[a+4],7,-176418897),g=n(g,p,u,_,e[a+5],12,1200080426),_=n(_,g,p,u,e[a+6],17,-1473231341),u=n(u,_,g,p,e[a+7],22,-45705983),p=n(p,u,_,g,e[a+8],7,1770035416),g=n(g,p,u,_,e[a+9],12,-1958414417),_=n(_,g,p,u,e[a+10],17,-42063),u=n(u,_,g,p,e[a+11],22,-1990404162),p=n(p,u,_,g,e[a+12],7,1804603682),g=n(g,p,u,_,e[a+13],12,-40341101),_=n(_,g,p,u,e[a+14],17,-1502002290),u=n(u,_,g,p,e[a+15],22,1236535329),p=r(p,u,_,g,e[a+1],5,-165796510),g=r(g,p,u,_,e[a+6],9,-1069501632),_=r(_,g,p,u,e[a+11],14,643717713),u=r(u,_,g,p,e[a],20,-373897302),p=r(p,u,_,g,e[a+5],5,-701558691),g=r(g,p,u,_,e[a+10],9,38016083),_=r(_,g,p,u,e[a+15],14,-660478335),u=r(u,_,g,p,e[a+4],20,-405537848),p=r(p,u,_,g,e[a+9],5,568446438),g=r(g,p,u,_,e[a+14],9,-1019803690),_=r(_,g,p,u,e[a+3],14,-187363961),u=r(u,_,g,p,e[a+8],20,1163531501),p=r(p,u,_,g,e[a+13],5,-1444681467),g=r(g,p,u,_,e[a+2],9,-51403784),_=r(_,g,p,u,e[a+7],14,1735328473),u=r(u,_,g,p,e[a+12],20,-1926607734),p=o(p,u,_,g,e[a+5],4,-378558),g=o(g,p,u,_,e[a+8],11,-2022574463),_=o(_,g,p,u,e[a+11],16,1839030562),u=o(u,_,g,p,e[a+14],23,-35309556),p=o(p,u,_,g,e[a+1],4,-1530992060),g=o(g,p,u,_,e[a+4],11,1272893353),_=o(_,g,p,u,e[a+7],16,-155497632),u=o(u,_,g,p,e[a+10],23,-1094730640),p=o(p,u,_,g,e[a+13],4,681279174),g=o(g,p,u,_,e[a],11,-358537222),_=o(_,g,p,u,e[a+3],16,-722521979),u=o(u,_,g,p,e[a+6],23,76029189),p=o(p,u,_,g,e[a+9],4,-640364487),g=o(g,p,u,_,e[a+12],11,-421815835),_=o(_,g,p,u,e[a+15],16,530742520),u=o(u,_,g,p,e[a+2],23,-995338651),p=s(p,u,_,g,e[a],6,-198630844),g=s(g,p,u,_,e[a+7],10,1126891415),_=s(_,g,p,u,e[a+14],15,-1416354905),u=s(u,_,g,p,e[a+5],21,-57434055),p=s(p,u,_,g,e[a+12],6,1700485571),g=s(g,p,u,_,e[a+3],10,-1894986606),_=s(_,g,p,u,e[a+10],15,-1051523),u=s(u,_,g,p,e[a+1],21,-2054922799),p=s(p,u,_,g,e[a+8],6,1873313359),g=s(g,p,u,_,e[a+15],10,-30611744),_=s(_,g,p,u,e[a+6],15,-1560198380),u=s(u,_,g,p,e[a+13],21,1309151649),p=s(p,u,_,g,e[a+4],6,-145523070),g=s(g,p,u,_,e[a+11],10,-1120210379),_=s(_,g,p,u,e[a+2],15,718787259),u=s(u,_,g,p,e[a+9],21,-343485551),p=t(p,l),u=t(u,h),_=t(_,c),g=t(g,d);return[p,u,_,g]}function h(e){var t,i="";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function c(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function d(e){return h(l(c(e),8*e.length))}function p(e,t){var i,a,n=c(e),r=[],o=[];for(r[15]=o[15]=void 0,n.length>16&&(n=l(n,8*e.length)),i=0;16>i;i+=1)r[i]=909522486^n[i],o[i]=1549556828^n[i];return a=l(r.concat(c(t)),512+8*t.length),h(l(o.concat(a),640))}function u(e){var t,i,a="0123456789abcdef",n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+=a.charAt(t>>>4&15)+a.charAt(15&t);return n}function _(e){return unescape(encodeURIComponent(e))}function g(e){return d(_(e))}function f(e){return u(g(e))}function m(e,t){return p(_(e),_(t))}function v(e,t){return u(m(e,t))}function y(e,t,i){return t?i?m(t,e):v(t,e):i?g(e):f(e)}e.md5=y}(t),function(e){"use strict";var t={};t.startsWith=function(e,t){return 0==e.indexOf(t)},e.StringUtils=t}(t),function(e){"use strict";var t={};t.clone=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.merge=function(e,i){var a=t.clone(e);for(var n in i)i.hasOwnProperty(n)&&(a[n]=i[n]);return a},e.ObjectUtils=t}(t),function(e){"use strict";function t(e,t,i){this.fn=e,this.ctx=t,this.params=i}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(a),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended="undefined"!=typeof e?e:!1,this._delay="undefined"!=typeof t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++){var t=this._queue[e];t.run()}this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var e=this;!function t(){var i=e._queue.shift();i?e._runCommand(i,function(){e._isSuspended||t()}):e._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function i(){e.run(),null!=t&&t.call(a)}var a=this;if(0==this._lastTs)i();else{var n=(new Date).getTime(),r=n-this._lastTs;this._lastTs=n,r<this._delay?setTimeout(i,this._delay-r):i()}},e.radio.CommandQueue=t}(a),function(e){"use strict";function t(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function i(e,i){if(e===i)return!0;for(var a=(e||"").split(t.SEPARATOR),n=(i||"").split(t.SEPARATOR),r=!0,o=0;o<a.length;o++)r=r&&(a[o]===t.WILDCARD||a[o]===n[o]);return r}t.WILDCARD="*",t.SEPARATOR=":",t.prototype.toString=function(){return"<channel: "+this._name+">"},t.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(a,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},t.prototype.on=function(e,t,i){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:i}))},t.prototype.off=function(e,t,i){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!i)return void(this._listeners={});if(e)this._removeListener(e,t,i);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,i)}},t.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&i(t,e.name))for(var a=this._listeners[t].slice(0),n=0;n<a.length;n++){var r=a[n];r.fn.call(r.ctx,e)}},t.prototype.comply=function(e,t,i){this._isShutDown||(this._commands[e]={cmd:t,ctx:i})},t.prototype.command=function(e,t){if(!this._isShutDown){var i=this._commands[e];return i?void i.cmd.call(i.ctx,t):void this._logger.warn(a,"#command > No command handler for: "+e)}},t.prototype.reply=function(e,t,i){this._isShutDown||(this._requests[e]={fn:t,ctx:i})},t.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(a,"#request > No request handler for: "+e),null)}},t.prototype._removeListener=function(e,t,i){t="function"==typeof t?t:null;var a=this._listeners[e];if(a){if(!a.length||null==t&&!i)return void delete this._listeners[e];for(var n=0;n<a.length;n++){var r=a[n];null!==t&&t!==r.fn||i&&i!==r.ctx||this._listeners[e].splice(n,1)}}};var a="radio::Channel";e.radio.Channel=t}(a),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var i=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new i(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(a),function(e){"use strict";function t(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}e.extend=t}(a),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(a),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(a,i),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(a),function(e){"use strict";function t(){this._logWriter=new a}function i(e){return 10>e?"00"+e:100>e?"0"+e:""+e}var a=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,n,t)},t.prototype.warn=function(e,t){this._log(e,o,t)},t.prototype.error=function(e,t){this._log(e,s,t)},t.prototype._log=function(e,t,a){if(t==s||this._enabled){var n="",r=new Date;n+="["+r.toTimeString()+"."+i(r.getMilliseconds())+"] ["+t+"] ",n+="["+e+"] "+a,this._logWriter.write(n)}};var n="INFO",r="DEBUG",o="WARN",s="ERROR";e.Logger=t}(a),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+i.SEPARATOR+this._eventName},e.Trigger=t}(a),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(a),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,i){e&&t&&(i=i||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:i}))},t.prototype.removeEventListener=function(e,t,i){if(e&&t){i=i||window;var a,n,r=!1;for(n in this._events)if(e===n){r=!0;break}if(r){for(a=this._events[n].length-1;a>=0;a--){var o=this._events[n][a];t===o.cb&&i===o.ctx&&this._events[n].splice(a,1)}this._events[n].length||delete this._events[n]}}},t.prototype.dispatchEvent=function(e){if(e.name){var t,i;for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var a=this._events[t],n=a.slice(0),r=n.length;for(i=0;r>i;i++)n[i].cb.call(n[i].ctx,e);break}}},t.prototype.removeAllListeners=function(e){if(e){var t,i;for(i in this._events)if(this._events.hasOwnProperty(i)){for(t=this._events[i].length-1;t>=0;t--){var a=this._events[i][t];a.ctx===e&&this._events[i].splice(t,1)}this._events[i].length||delete this._events[i]}}else this._events={}},e.EventDispatcher=t}(a),function(e){"use strict";function t(){}function i(e,t){this.url=e||null,this.method=t,this._xmlhttp=null}function a(){a.__super__.constructor.call(this),this._connection=null}var n=e.Event,r=e.EventDispatcher;t.GET="GET",a.RESPONSE="response",a.INSTANCE="instance",e.extend(a,r),a.prototype.close=function(){this.removeAllListeners(null)},a.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},a.prototype._createCORSRequest=function(e){var t=null;if("undefined"!=typeof window.XMLHttpRequest){var i=new window.XMLHttpRequest;"withCredentials"in i&&(t=i,t.open(e.method,e.url,!0))}if(null==t&&"undefined"!=typeof window.XDomainRequest&&(t=new window.XDomainRequest,t.open(e.method,e.url)),t){var r={};r[a.INSTANCE]=this;var o=this;t.onload=function(){return t.status&&parseInt(t.status,10)>=400?this.onerror():(r[a.RESPONSE]=t.responseText,void o.dispatchEvent(new n(n.SUCCESS,r)))},t.onerror=function(){o.dispatchEvent(new n(n.ERROR,r))}}return t},a.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[a.RESPONSE]="",t[a.INSTANCE]=this,this.dispatchEvent(new n(n.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=i,e.URLLoader=a}(a),function(e){"use strict";var t="js",i="1.5.4.34",a="c8947c",n=3,r={};r.getVersion=function(){return t+"-"+i+"-"+a},r.getMajor=function(){return r.getNumberAtPosition(0)},r.getMinor=function(){return r.getNumberAtPosition(1)},r.getMicro=function(){return r.getNumberAtPosition(2)},r.getPatch=function(){return r.getNumberAtPosition(3)},r.getBuild=function(){return a},r.getApiLevel=function(){return n},r.getNumberAtPosition=function(e){return i.split(".")[e]},e.Version=r}(i),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(i),function(e){"use strict";function t(){this.debugLogging=!1}e.HeartbeatConfig=t}(i),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(i),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(a),function(e){"use strict";function t(e,t,i,a){this.trigger=e,this.action=i,this.plugin=t,this._paramMappings={},this.mergeParams(a)}var i=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];this._paramMappings[i.getKeyName()]=i}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var a=new i(e,t);this._paramMappings.hasOwnProperty(a.getKeyName())&&delete this._paramMappings[a.getKeyName()]},e.plugin.Behaviour=t}(a),function(e){"use strict";function t(e,t,a){this._pluginName=e,this._key=t,this._paramName=a||e+i.SEPARATOR+t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+i.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(a),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new a(this._logger),this._dataChannel=this._radio.channel(o),this._ctrlChannel=this._radio.channel(s)}var i=e.Event,a=e.radio.Radio,n=e.radio.Channel,r=e.plugin.Behaviour;t.ERROR="error",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),this._plugins[t]=e,e.bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,i,a){this._dataChannel.on(e+n.SEPARATOR+t,i,a)},t.prototype.off=function(e,t,i,a){var r=e&&t?e+n.SEPARATOR+t:null;this._dataChannel.off(r,i,a)},t.prototype.trigger=function(e){var t=e.name,i=this._behaviours[t];if(i){var a,n,r,o,s,l={},h={};for(a=0;a<i.length;a++)if(r=i[a],o=r.getParams())for(n=0;n<o.length;n++)s=o[n],l[s.getPluginName()]=l[s.getPluginName()]||[],s.key in l[s.getPluginName()]||l[s.getPluginName()].push(s.getKey());for(var c in l)l.hasOwnProperty(c)&&(h[c]=this.request(c,l[c]));for(a=0;a<i.length;a++){r=i[a];var d={_behaviour:r,_eventData:e.data||{}};if(o=r.getParams()){for(n=0;n<o.length;n++)s=o[n],d[s.getParamName()]=h[s.getPluginName()]?h[s.getPluginName()][s.getKey()]:null;this.command(r.plugin.getName(),r.action,d)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){var i=this._plugins[e];return i&&t&&0!=t.length?i.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;var a=new i(t.ERROR,e);this._ctrlChannel.trigger(a)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){this._radio.shutdown();for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,i){this._dataChannel.comply(e.getName()+n.SEPARATOR+t,i,e)},t.prototype.command=function(e,t,i){this._dataChannel.command(e+n.SEPARATOR+t,i)},t.prototype.registerBehaviour=function(e,t,i,a){var n=e.getName(),o=new r(e,t,i,a);this._behaviours[n]=this._behaviours[n]||[],this._behaviours[n].push(o)};var o="data_channel",s="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=t}(a),function(e,t){"use strict";function i(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new a}var a=e.Logger,n=e.Trigger,r=e.Event,o=t.ErrorInfo;i.INITIALIZED="initialized",i.prototype.configure=function(e){},i.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new o("Invalid state.","Plugin already destroyed."))},i.prototype.setup=function(){this._trigger(i.INITIALIZED),this._isInitialized=!0},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},i.prototype.enable=function(){this._isEnabled=!0,this._enabled()},i.prototype.disable=function(){this._isEnabled=!1,this._disabled()},i.prototype.getName=function(){return this._name},i.prototype.getLogger=function(){return this._logger},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var i=0;i<e.length;i++){var a=e[i];this._dataResolver.hasOwnProperty(a)&&(t=t||{},"function"==typeof this._dataResolver[a]?t[a]=this._dataResolver[a].call(this):t[a]=this._dataResolver[a])}return t},i.prototype.toString=function(){return"<plugin: "+this._name+">"},i.prototype._enabled=function(){},i.prototype._disabled=function(){},i.prototype._teardown=function(){},i.prototype._canProcess=function(){return this._isEnabled?this._isDestroyed?(this._logger.error(this._logTag,"Plugin destroyed."),!1):!0:(this._logger.error(this._logTag,"Plugin disabled."),!1)},i.prototype._trigger=function(e,t){var i=r.createFromTrigger(new n(this.getName(),e));i.data=t,this._pluginManager.trigger(i)},e.plugin.BasePlugin=i}(a,i),function(e){"use strict";function t(e,t,i){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount="undefined"!=typeof i?i:n,this._nextTickTimestamp=0,this.reset()}function i(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var i=this;this._clock=window.setInterval(function(){i._onTick()},1e3*r)}t.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},t.prototype.shouldTick=function(){var e=(new Date).getTime();return e>this._nextTickTimestamp-r/2?(this.tick++,this._updateNextTickTimestamp(),!0):!1},t.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},i.prototype.createTimer=function(e,i,a){this._timers[e]=new t(e,i,a)},i.prototype.destroyTimer=function(e){delete this._timers[e]},i.prototype.resumeTimer=function(e,t){t="undefined"!=typeof t?t:!1,this._logger.debug(a,"#resumeTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!0,t&&i.reset())},i.prototype.pauseTimer=function(e,t){t="undefined"!=typeof t?t:!1,this._logger.debug(a,"#pauseTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!1,t&&i.reset())},i.prototype.isTimerPaused=function(e){var t=this._timers[e];return t?!t.isActive:!1},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},i.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(t.interval>1&&this._logger.debug(a,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=n&&t.repeatCount--):this.destroyTimer(t.name))}};var a="service.clock::TimerManager",n=-1,r=.25;e.clock.TimerDescriptor=t,e.clock.TimerManager=i}(n),function(e,t,i){"use strict";function a(e){if(a.__super__.constructor.call(this,s),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new n(this,this._logger),this._setupDataResolver()}var n=i.clock.TimerManager,r=t.StringUtils,o=e.plugin.BasePlugin;e.extend(a,o),a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,c,this._cmdResume),this._pluginManager.comply(this,h,this._cmdPause),this._pluginManager.comply(this,d,this._cmdDestroy)},a.prototype._teardown=function(){this._timerManager.destroy()},a.prototype._cmdCreate=function(e){var t=e[_]||v;this._timerManager.createTimer(e[p],e[u],t)},a.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[p],!!e[f])},a.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[p],!!e[f])},a.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[p])},a.prototype.onTick=function(e,t,i){e+=".tick";var a={};a[p]=e,a[u]=t,a[g]=i,this._trigger(e,a)},a.prototype._setupDataResolver=function(){var e={},t=this._timerManager;e[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var n=t[a];if(i=i||{},r.startsWith(n,m)){var o=n.split(m+".");o.length>0&&(i[n]=e[m].call(this,o[1]))}}return i}};var s="service.clock",l="create",h="pause",c="resume",d="destroy",p="name",u="interval",_="repeat_count",g="tick",f="reset",m="is_paused",v=-1;i.clock.ClockService=a}(a,t,n),function(e,t,i){"use strict";function a(e,t){if(this._logger=new n,this._pluginManager=new r(this._logger),this._pluginManager.addPlugin(new o(this._logger)),t)for(var i=0;i<t.length;i++)this._pluginManager.addPlugin(t[i]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var n=e.Logger,r=e.plugin.PluginManager,o=t.clock.ClockService;a.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(s,"Instance is destroyed.")},a.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var s="Heartbeat";i.Heartbeat=a}(a,n,i),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=a),e.ADB.va||(e.ADB.va=i),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),!function(e){if("undefined"==typeof t)var t={};!function(e){"use strict";var t={};t.ASSET_TYPE_VOD="vod",t.ASSET_TYPE_LIVE="live",t.ASSET_TYPE_LINEAR="linear",e.AssetType=t}(t),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType},e.VideoInfo=t}(t),function(e){"use strict";function t(){this.debugLogging=!1}e.VideoPlayerPluginConfig=t}(t),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,r),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._setupDataResolver()}var a=e.plugin.BasePlugin,n=t.VideoPlayerPluginConfig;e.extend(i,a),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof n))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},i.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(c),this._isTrackingSessionStarted=!0}},i.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(l),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},i.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(h),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1}},i.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(u),this._startPlayheadTimer())},i.prototype.trackPause=function(){this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&(this._stopPlayheadTimer(),this._trigger(_))},i.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(m))},i.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(v),this._startPlayheadTimer())},i.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(y))},i.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&(this._trigger(T),this._startPlayheadTimer())},i.prototype.trackComplete=function(e){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var t={};t[b]=e,this._stopPlayheadTimer(),this._trigger(d,t)}},i.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(p,e)},i.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(E)},i.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(D)},i.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&this._trigger(g)},i.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&this._trigger(f)},i.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(P)},i.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[S]=s,t[I]=e,this._trigger(A,t)}},i.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[S]=o,
t[I]=e,this._trigger(A,t)}},i.prototype._setupDataResolver=function(){function e(){return o.video?o.video:(o.video=s._delegate.getVideoInfo(),s._logger.info(s._logTag,"Data from delegate > VideoInfo: "+o.video),o.video)}function t(){return o.ad?o.ad:(o.ad=s._delegate.getAdInfo(),s._logger.info(s._logTag,"Data from delegate > AdInfo: "+o.ad),o.ad)}function i(){return o.pod?o.pod:(o.pod=s._delegate.getAdBreakInfo(),s._logger.info(s._logTag,"Data from delegate > AdBreakInfo: "+o.pod),o.pod)}function a(){return o.chapter?o.chapter:(o.chapter=s._delegate.getChapterInfo(),s._logger.info(s._logTag,"Data from delegate > ChapterInfo: "+o.chapter),o.chapter)}function n(){return o.qos?o.qos:(o.qos=s._delegate.getQoSInfo(),s._logger.info(s._logTag,"Data from delegate > QoSInfo: "+o.qos),o.qos)}var r={},o={},s=this;r["video.id"]=function(){var t=e(),i=t?t.id:null;return s._logger.debug(s._logTag,"Resolving video.id: "+i),i},r["video.name"]=function(){var t=e(),i=t?t.name:null;return s._logger.debug(s._logTag,"Resolving video.name: "+i),i},r["video.length"]=function(){var t=e(),i=t?t.length:NaN;return s._logger.debug(s._logTag,"Resolving video.length: "+i),i},r["video.playerName"]=function(){var t=e(),i=t?t.playerName:null;return s._logger.debug(s._logTag,"Resolving video.playerName: "+i),i},r["video.streamType"]=function(){var t=e(),i=t?t.streamType:null;return s._logger.debug(s._logTag,"Resolving video.streamType: "+i),i},r["video.playhead"]=function(){var t=e(),i=t?t.playhead:NaN;return s._logger.debug(s._logTag,"Resolving video.playhead: "+i),i},r["pod.name"]=function(){var e=i(),t=e?e.name:null;return s._logger.debug(s._logTag,"Resolving pod.name: "+t),t},r["pod.playerName"]=function(){var e=i(),t=e?e.playerName:null;return s._logger.debug(s._logTag,"Resolving pod.playerName: "+t),t},r["pod.position"]=function(){var e=i(),t=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving pod.position: "+t),t},r["pod.startTime"]=function(){var e=i(),t=e?e.startTime:NaN;return s._logger.debug(s._logTag,"Resolving pod.startTime: "+t),t},r["ad.isInAd"]=function(){var e=t(),i=null!=e;return s._logger.debug(s._logTag,"Resolving ad.isInAd: "+i),i},r["ad.isInAdBreak"]=function(){var e=i(),t=null!=e;return s._logger.debug(s._logTag,"Resolving ad.isInAdBreak: "+t),t},r["ad.id"]=function(){var e=t(),i=e?e.id:null;return s._logger.debug(s._logTag,"Resolving ad.id: "+i),i},r["ad.name"]=function(){var e=t(),i=e?e.name:null;return s._logger.debug(s._logTag,"Resolving ad.name: "+i),i},r["ad.length"]=function(){var e=t(),i=e?e.length:NaN;return s._logger.debug(s._logTag,"Resolving ad.length: "+i),i},r["ad.position"]=function(){var e=t(),i=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving ad.position: "+i),i},r["chapter.isInChapter"]=function(){var e=a(),t=null!=e;return s._logger.debug(s._logTag,"Resolving chapter.isInChapter: "+t),t},r["chapter.name"]=function(){var e=a(),t=e?e.name:null;return s._logger.debug(s._logTag,"Resolving chapter.name: "+t),t},r["chapter.length"]=function(){var e=a(),t=e?e.length:NaN;return s._logger.debug(s._logTag,"Resolving chapter.length: "+t),t},r["chapter.position"]=function(){var e=a(),t=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving chapter.position: "+t),t},r["chapter.startTime"]=function(){var e=a(),t=e?e.startTime:NaN;return s._logger.debug(s._logTag,"Resolving chapter.startTime: "+t),t},r["qos.bitrate"]=function(){var e=n(),t=e?e.bitrate:NaN;return s._logger.debug(s._logTag,"Resolving qos.bitrate: "+t),t},r["qos.fps"]=function(){var e=n(),t=e?e.fps:NaN;return s._logger.debug(s._logTag,"Resolving qos.fps: "+t),t},r["qos.droppedFrames"]=function(){var e=n(),t=e?e.droppedFrames:NaN;return s._logger.debug(s._logTag,"Resolving qos.droppedFrames: "+t),t},r["qos.startupTime"]=function(){var e=n(),t=e?1e3*e.startupTime:NaN;return s._logger.debug(s._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;o={};for(var t=null,i=0;i<e.length;i++){var a=e[i];t=t||{},t[a]=r.hasOwnProperty(a)?r[a].call(this):null}return t}},i.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(_)))},i.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this.trackPlay()))},i.prototype._startPlayheadTimer=function(){var e=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(e._canProcess()){var t=e._dataResolver(["ad.isInAd","video.playhead"]);if(t.hasOwnProperty("ad.isInAd")&&t["ad.isInAd"])e._playheadStalled&&e._trackExitStall();else{var i=t["video.playhead"];i!=e._previousPlayhead?e._trackExitStall():e._previousPlayhead>=0&&i==e._previousPlayhead&&(e._stalledPlayheadCount++,e._stalledPlayheadCount==N&&e._trackPlayheadStall()),e._previousPlayhead=i}}},w))},i.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._stalledPlayheadCount=0},i.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)};var r="player",o="sourceErrorExternal",s="sourceErrorSDK",l="video_load",h="video_unload",c="video_start",d="video_complete",p="timed_metadata",u="play",_="pause",g="ad_start",f="ad_complete",m="buffer_start",v="buffer_complete",y="seek_start",T="seek_complete",E="chapter_start",D="chapter_complete",P="bitrate_change",A="track_error",b="callback",S="source",I="error_id",w=1001,N=2;t.VideoPlayerPlugin=i}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),!function(e){if("undefined"==typeof t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function i(e,t,i,a,n){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!n)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+i,this._logger=n,this._isDestroyed=!1,this._createTimer(i,a),this._installHandlers()}var a=e.Event;i.KEY_NAME="name",i.KEY_INTERVAL="interval",i.KEY_RESET="reset",i.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[i.KEY_NAME]=n+"."+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(r,l,t)},i.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[i.KEY_NAME]=n+"."+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(r,s,t)},i.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[i.KEY_NAME]=n+"."+this._name,this._pluginManager.command(r,h,e)}},i.prototype.setInterval=function(e){var t=c+"."+n+"."+this._name,i=this._pluginManager.request(r,[t])[t];this.pause(!0),this._createTimer(this._name,e),i||this.resume(!0)},i.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.resume(t)},i.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.pause(t)},i.prototype._onTick=function(e,t){this._channel.trigger(new a("clock:"+this._name+".tick",t))},i.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(r,n+"."+this._name+".tick",this._onTick,this)},i.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},i.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var a={};a[i.KEY_NAME]=n+"."+this._name,a[i.KEY_INTERVAL]=this._interval,this._pluginManager.command(r,o,a)};var n="heartbeat",r="service.clock",o="create",s="pause",l="resume",h="destroy",c="is_paused";t.clock.Timer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,s,a)}var a=e.Event,n=t.clock.Timer;e.extend(i,n),i.prototype._onCheckStatusComplete=function(e){var t=e.data[d];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");t>o?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s)},i.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new a(l))},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(h,this._getSettings,this),this._channel.on(c,this._onCheckStatusComplete,this),this._channel.reply(d,function(){return this._interval},this)};var r="check_status",o=600,s=60,l="clock:check_status.tick",h="clock:check_status.get_settings",c="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,n,r,a)}var a=t.clock.Timer;e.extend(i,a),i.prototype._onCheckStatusComplete=function(e){var t=e.data[o];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(r)},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(s,this._onCheckStatusComplete,this),this._channel.reply(o,function(){return this._interval},this)};var n="reporting",r=10,o="reporting_interval",s="net:check_status_complete";t.clock.ReportingTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,n,r,a)}var a=t.clock.Timer;e.extend(i,a);var n="flush_filter",r=.25;t.clock.FlushFilterTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,i){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!i)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new r(e,t,i),this._checkStatusTimer=new a(e,t,i),this._flushFilterTimer=new n(e,t,i)}var a=t.clock.CheckStatusTimer,n=t.clock.FlushFilterTimer,r=t.clock.ReportingTimer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy())},t.clock.Clock=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this.value=e,this.hint=t}function a(e){this.realm=e,this.data={}}i.HINT_SHORT="short",a.prototype.setField=function(e,t,a){this.data[e]=new i(t,a)},a.prototype._createAccessor=function(e,t,i){var a=this;return function(){return arguments.length&&(a[e]=arguments[0],a.setField(t,arguments[0],i)),a[e]}},t.model.Dao=a,t.model.DaoField=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var a=t.model.Dao;e.extend(i,a),t.model.AdDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",n.HINT_SHORT),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var a=t.model.Dao,n=t.model.DaoField;e.extend(i,a),t.model.AdobeAnalyticsDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var a=t.model.Dao;e.extend(i,a),t.model.ChapterDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new n(e.adData()):null;this.adData(t);var a=e.chapterData()?new r(e.chapterData()):null;this.chapterData(a)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var a=t.model.Dao,n=t.model.AdDao,r=t.model.ChapterDao;e.extend(i,a),i.TYPE_AD="ad",i.TYPE_MAIN_CONTENT="main",t.model.AssetDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var a=t.model.Dao;e.extend(i,a),i.EVENT_TYPE_AA_START="aa_start",i.EVENT_TYPE_AA_AD_START="aa_ad_start",i.EVENT_TYPE_START="start",i.EVENT_TYPE_CHAPTER_START="chapter_start",i.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",i.EVENT_TYPE_PLAY="play",i.EVENT_TYPE_PAUSE="pause",i.EVENT_TYPE_BUFFER="buffer",i.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",i.EVENT_TYPE_ERROR="error",i.EVENT_TYPE_COMPLETE="complete",t.model.EventDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var a=t.model.Dao;e.extend(i,a),t.model.QoSDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(n),this.sdk(n),this.channel(n),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var a=t.model.Dao;e.extend(i,a);var n="unknown";t.model.ServiceProviderDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var a=t.model.Dao;e.extend(i,a),t.model.SessionDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type())}else this.type(null)}var a=t.model.Dao;e.extend(i,a),t.model.StreamDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var a=t.model.Dao;e.extend(i,a),t.model.UserDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,i,l,h){this.eventData=new n,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(i),this.assetData=new r(e._assetData),this.streamData=new o(e._streamData),this.qosData=new s(e._qosData),this.cuserData=a.clone(e._cuserData),this.meta=l,this.callback=h}var a=e.ObjectUtils,n=t.model.EventDao,r=t.model.AssetDao,o=t.model.StreamDao,s=t.model.QoSDao;t.model.TrackItem=i}(e.ADB.va.utils,t),function(e,t){"use strict";function i(e,t,i,l,h){this.adobeAnalyticsData=e,this.userData=t,this.serviceProviderData=i,this.sessionData=l,this.eventData=new n(h.eventData),this.assetData=new r(h.assetData),this.streamData=new o(h.streamData),this.qosData=new s(h.qosData),this.cuserData=a.clone(h.cuserData),this.meta=a.clone(h.meta),this.callback=h.callback}var a=e.ObjectUtils,n=t.model.EventDao,r=t.model.AssetDao,o=t.model.StreamDao,s=t.model.QoSDao;t.model.CUserDao,t.model.Report=i}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,i,a){},t.prototype.serializeString=function(e,t,i,a){},e.model.ISerializer=t}(t),function(e,t){"use strict";function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var a=t.model.Dao,n=t.model.DaoField,r=t.model.ISerializer;e.extend(i,r),i.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},i.prototype.serializeDao=function(e){var t=this._processDao(e);return t.filter(function(e){return!!e}).join("&")},i.prototype.serializeMap=function(e,t){var i=[],a=t?t:"meta";for(var n in e)e.hasOwnProperty(n)&&e[n]&&i.push("s:"+a+":"+n+"="+window.encodeURIComponent(e[n]));return i.join("&")},i.prototype.serializeNumber=function(e,t,i,a){var r=s;return null==t||isNaN(t)?null:(a===n.HINT_SHORT&&(r=l),r+":"+i+":"+e+"="+Math.floor(t))},i.prototype.serializeString=function(e,t,i,a){return t?h+":"+i+":"+e+"="+window.encodeURIComponent(t):null},i.prototype._processDao=function(e){var t=[];for(var i in e.data)if(e.data.hasOwnProperty(i)){var n=e.data[i],r=n.value,s=n.hint,l=null,h=e.realm;if(null==r)continue;"number"==typeof r?l=this.serializeNumber(i,r,h,s):"string"==typeof r?l=this.serializeString(i,r,h,s):r instanceof a?l=this.serializeDao(r):this._logger.warn(o,"#_processDao() > Unable to serialize DAO. Field: "+i+". Value: "+r+"."),l&&t.push(l)}return t};var o="ah::QuerystringSerializer",s="l",l="h",h="s";t.model.QuerystringSerializer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}i.prototype.parse=function(){var e,t,i,l,h;if(window.DOMParser){var c=new window.DOMParser;h=c.parseFromString(this._data,"text/xml")}else h=new window.ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.loadXML(this.data);var d;d=parseInt(h.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),d&&(e=d),d=parseInt(h.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),d&&(t=d),d=parseInt(h.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),d&&(i=1==d),h.getElementsByTagName("nielsenEnabled")[0]?(d=parseInt(h.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),l=1==d):l=!0;var p={};return p[n]=e,p[r]=t,p[o]=i,p[s]=l,this._logger.debug(a,"#parse() > Obtained configuration settings."),p};var a="ah::SettingsParser",n="reporting_interval",r="check_status_interval",o="track_external_errors",s="nielsen_enabled";t.network.SettingsParser=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._quietMode=!1,this._isConfigured=!1,this._isDestroyed=!1,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new l(t),this._installEventListeners()}var a=e.Event,n=e.URLRequestMethod,r=e.URLRequest,o=e.URLLoader,s=t.network.SettingsParser,l=t.model.QuerystringSerializer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(h,"#destroy()"),this._uninstallEventListeners())},i.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(h,"#_onApiConfig(sb_server="+t[c]+", check_status_server="+t[d]+", publisher="+t[p]+", quiet_mode="+t[u]+", ssl="+t[_]+")"),this._trackingServer=this._updateRequestProtocol(t[c],t[_]),this._checkStatusServer=this._updateRequestProtocol(t[d],t[_]),this._publisher=t[p],this._quietMode=t[u],this._isConfigured=!0},i.prototype._onFilterReportAvailable=function(e){var t=e.data;if(!this._isConfigured)return void this._logger.warn(h,"#_onFilterReportAvailable() > Unable to send request: not configured.");var i=t[g],s=this._serializer.serializeReport(i),l=this._trackingServer+"/?"+s.serializedOutput,c=new r(l,n.GET);this._logger.debug(h,"_onFilterReportAvailable() > "+c.url);var d=this,p=function(e){_.close(),s.callback&&s.callback.call(null)},u=function(e){_.close(),d._logger.warn(h,"#_onFilterReportAvailable() > Failed to send heartbeat report."),s.callback&&s.callback.call(null)};if(!this._quietMode){var _=new o;_.addEventListener(a.SUCCESS,p,this),_.addEventListener(a.ERROR,u,this),_.load(c)}},i.prototype._onClockCheckStatusTick=function(e){function t(e){if(e.data){var t=new s(e.data.response,l._logger),i=t.parse();i?l._channel.trigger(new a(y,i)):l._logger.warn(h,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}u.close()}function i(e){l._logger.warn(h,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),u.close()}if(!this._isConfigured)return void this._logger.warn(h,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(h,"#_onClockCheckStatusTick() > Publisher is NULL.");var l=this,c=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),d=this._checkStatusServer+c+".xml?r="+(new Date).getTime(),p=new r(d,n.GET),u=new o;u.addEventListener(a.SUCCESS,t,this),u.addEventListener(a.ERROR,i,this),this._logger.debug(h,"#_onClockCheckStatusTick() > Get new settings from: "+d),u.load(p)},i.prototype._updateRequestProtocol=function(e,t){var i=e;return 0===i.indexOf("http://")?i=i.slice(7):0===i.indexOf("https://")&&(i=i.slice(8)),t?"https://"+i:"http://"+i},i.prototype._installEventListeners=function(){this._channel.on(f,this._onApiConfig,this),this._channel.on(m,this._onFilterReportAvailable,this),this._channel.on(v,this._onClockCheckStatusTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var h="ah::Network",c="tracking_server",d="check_status_server",p="publisher",u="quiet_mode",_="ssl",g="report",f="api:config",m="filter:data_available",v="clock:check_status.tick",y="net:check_status_complete";t.network.Network=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new l,this._installEventListeners()}function a(e){var t=[];if(e)for(var i=0;i<e.length;i++){var a=e[i];a.eventData.type()!=c.EVENT_TYPE_PAUSE&&t.push(a)}return t}function n(e){var t=-1,i=-1,a=[];return e.forEach(function(e){e.eventData.type()==c.EVENT_TYPE_START?e.assetData.type()==d.TYPE_MAIN_CONTENT?-1==t?t=a.push(e)-1:(e.eventData.prevTs(-1),a[t]=e):-1==i?i=a.push(e)-1:(e.eventData.prevTs(-1),a[i]=e):a.push(e)}),a}function r(e){var t=[];return e.forEach(function(i){if(i.eventData.type()==c.EVENT_TYPE_PLAY){if(i.eventData.duration()>y)t.push(i);else if(0==i.eventData.duration()&&i.assetData.type()==d.TYPE_MAIN_CONTENT){var a=o(e);a.indexOf(i)==a.length-1&&t.push(i)}}else t.push(i)}),t}function o(e){var t=[];return e.forEach(function(e){(e.eventData.type()==c.EVENT_TYPE_PLAY||e.eventData.type()==c.EVENT_TYPE_BUFFER||e.eventData.type()==c.EVENT_TYPE_START)&&t.push(e)}),t}var s=e.radio.Command,l=e.radio.CommandQueue,h=e.Event,c=t.model.EventDao,d=t.model.AssetDao;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners(),this.clear())},i.prototype.clear=function(){this._logger.debug(E,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},i.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[f];if(t){var i=t.sessionData.sessionId();this._reportBuffer[i]=this._reportBuffer[i]||[],this._reportBuffer[i].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var a={};a[g]=!0,a[m]=1,this._channel.command(v,a)}}},i.prototype._flushBufferReport=function(){function e(e){if(e)for(var i=0;i<e.length;i++){var a=e[i],n=a.sessionData.sessionId();t._tsHistory[n]=t._tsHistory[n]||{};var r=a.eventData.type()+"."+(a.assetData.type()==d.TYPE_AD?a.assetData.adData().adId():a.assetData.videoId());t._tsHistory[n].hasOwnProperty(r)&&a.eventData.prevTs(t._tsHistory[n][r]),t._tsHistory[n][r]=a.eventData.ts()}}if(!this._isDestroyed){var t=this;for(var i in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(i)){var o=r(n(a(this._reportBuffer[i])));e(o);for(var s=0;s<o.length;s++){var l=o[s],c={};c[f]=l,this._channel.trigger(new h(u,c))}}this._reportBuffer={};var p=this._channel.request(T),_=this._tsHistory[p]||{};this._tsHistory={},this._tsHistory[p]=_,this._isBufferingInProgress=!1}},i.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new s(this._bufferReport,this,[t]))},i.prototype._onClockFlushFilterTick=function(e){this._workQueue.addCommand(new s(this._flushBufferReport,this))},i.prototype._installEventListeners=function(){this._channel.on(p,this._onContextReportAvailable,this),this._channel.on(_,this._onClockFlushFilterTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var p="context:report_available",u="filter:data_available",_="clock:flush_filter.tick",g="reset",f="report",m="repeat_count",v="clock:flush_filter.resume",y=250,T="session_id",E="ah::ReportFilter";t.filter.ReportFilter=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");
if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},i.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=i}(e.ADB.va,t),function(e,t){"use strict";function i(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var a=t.model.Report;i.prototype.createReportForItem=function(e){return this._logger.debug(n,"Creating report for item: "+e.eventData.type()),new a(this._context._adobeAnalyticsData,this._context._userData,this._context._serviceProviderData,this._context._sessionData,e)};var n="ah::ReportFactory";t.context.ReportFactory=i}(e.ADB.core,t),function(e,t,i,a){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=te,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new h,this._serviceProviderData=new c,this._userData=new d,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new y(this,this._logger),this._inputDataValidator=new T(function(e){this._logger.error(E,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new s(P,e))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var r=i.md5,o=i.ObjectUtils,s=e.Event,l=a.model.SessionDao,h=a.model.AdobeAnalyticsDao,c=a.model.ServiceProviderDao,d=a.model.UserDao,p=a.model.EventDao,u=a.model.AssetDao,_=a.model.StreamDao,g=a.model.QoSDao,f=a.model.AdDao,m=a.model.ChapterDao,v=a.model.TrackItem,y=a.context.ReportFactory,T=a.context.InputDataValidator;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiAnalyticsStart=function(e){this._logger.debug(E,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[w]);i.assetData.adData(null),i.assetData.type(u.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(i)}},n.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(E,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[w]);this._sendHit(i)}},n.prototype._onApiVideoLoad=function(e){this._logger.debug(E,"#_onApiVideoLoad()"),this._resetInternalState(),this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0},n.prototype._onApiVideoUnload=function(e){return this._logger.debug(E,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(E,"#_onApiVideoUnload() > No active tracking session.")},n.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(E,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._activeAssetId=t.videoId,this._serviceProviderData.playerName(t.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(t.videoLength),this._assetData.type(u.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var i=t.metaNielsen?o.merge(t.metaVideo,t.metaNielsen):t.metaVideo,a=new v(this,p.EVENT_TYPE_START,t.playhead,i,t._eventData[w]);this._sendHit(a)}},n.prototype._onApiVideoComplete=function(e){this._logger.debug(E,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var i=new v(this,p.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[w]);this._sendHit(i),this._isVideoComplete=!0}},n.prototype._onApiPlay=function(e){this._logger.debug(E,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[w]);this._sendHit(i)}},n.prototype._onApiPause=function(e){this._logger.debug(E,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_PAUSE,t.playhead,null,t._eventData[w]);this._sendHit(i)}},n.prototype._onApiBufferStart=function(e){this._logger.debug(E,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[w]);this._sendHit(i)}},n.prototype._onApiSeekStart=function(e){this._logger.debug(E,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(u.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},n.prototype._onApiSeekComplete=function(e){this._logger.debug(E,"#_onApiSeekComplete()");var t=e.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(t.isInAd){if(!this._inputDataValidator.validateFields(t,["adId","adPosition","podPosition","podPlayerName"]))return;var i=r(this._assetData.videoId())+"_"+t.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==i&&parseInt(this._stashedAdData.podPosition(),10)==t.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=t.adId;var a=new f;a.adId(this._activeAssetId),a.adName(t.adName),a.adLength(t.adLength),a.podId(i),a.resolver(t.podPlayerName),a.podPosition(t.podPosition+""),a.podName(t.podName),a.podOffset(t.podSecond),a.sid(this._generateSessionId()),this._assetData.adData(a)}this._assetData.type(u.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(u.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(t.isInChapter){if(!this._inputDataValidator.validateFields(t,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&t.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var n=new m;n.id(r(this._assetData.videoId())+"_"+t.chapterPosition),n.name(t.chapterName),n.length(t.chapterLength),n.position(t.chapterPosition),n.offset(t.chapterOffset),n.sid(this._generateSessionId()),this._assetData.chapterData(n)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},n.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(E,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=t.adId;var i=new f;i.adId(this._activeAssetId),i.adName(t.adName),i.adLength(t.adLength),i.resolver(t.podPlayerName),i.podId(r(this._assetData.videoId())+"_"+t.podPosition),i.podPosition(t.adPosition+""),i.podName(t.podName),i.podOffset(t.podSecond),i.sid(this._generateSessionId()),this._assetData.adData(i),this._assetData.type(u.TYPE_AD),this._updateQoSInfo(t);var a=o.merge(t.metaVideo,t.metaAd);a=t.metaNielsen?o.merge(a,t.metaNielsen):a;var n=new v(this,p.EVENT_TYPE_START,t.playhead,a,t._eventData[w]);this._sendHit(n)}},n.prototype._onApiAdComplete=function(e){this._logger.debug(E,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=u.TYPE_AD)return void this._logger.warn(E,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[w]);this._sendHit(i),this._assetData.adData(null),this._assetData.type(u.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},n.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(E,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var i=new m;i.id(r(this._assetData.videoId())+"_"+t.chapterPosition),i.name(t.chapterName),i.length(t.chapterLength),i.position(t.chapterPosition),i.offset(t.chapterOffset),i.sid(this._generateSessionId()),this._assetData.chapterData(i),this._updateQoSInfo(t);var a=o.merge(t.metaVideo,t.metaAd);a=t.metaNielsen?o.merge(a,t.metaNielsen):a;var n=new v(this,p.EVENT_TYPE_CHAPTER_START,t.playhead,a,t._eventData[w]);n.assetData.adData(null),n.assetData.type(u.TYPE_MAIN_CONTENT),this._sendHit(n)}},n.prototype._onApiChapterComplete=function(e){this._logger.debug(E,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(E,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[w]);i.assetData.adData(null),i.assetData.type(u.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},n.prototype._onApiBitrateChange=function(e){this._logger.debug(E,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[w]);this._sendHit(i)}},n.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(E,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(E,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||t._eventData.source===D){this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_ERROR,0,null,t._eventData[w]);i.eventData.id(t._eventData.error_id),i.eventData.source(t._eventData.source),this._sendHit(i)}},n.prototype._onApiTrackInternalError=function(e){this._logger.debug(E,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")");var t=e.data;this._updateQoSInfo(t);var i=new v(this,p.EVENT_TYPE_ERROR,0);i.eventData.id(t.error_id),i.eventData.source(t.source),this._sendHit(i)},n.prototype._onApiQuantumEnd=function(e){this._logger.debug(E,"#_onApiQuantumEnd(interval="+this._channel.request(S)+")");var t=e.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._lastInBandItem.eventData.playhead(t.playhead),this._updateQoSInfo(t),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime()),this._sendHit(this._lastInBandItem))},n.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[k],this._reportingInterval=t[M],this._reportingInterval||(this._reportingInterval=te),this._logger.debug(E,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},n.prototype._installEventListeners=function(){this._channel.on(L,this._onApiAnalyticsStart,this),this._channel.on(R,this._onApiAnalyticsAdStart,this),this._channel.on(B,this._onApiVideoLoad,this),this._channel.on(O,this._onApiVideoUnload,this),this._channel.on(V,this._onApiVideoStart,this),this._channel.on(x,this._onApiVideoComplete,this),this._channel.on(H,this._onApiAdStart,this),this._channel.on(F,this._onApiAdComplete,this),this._channel.on(q,this._onApiPlay,this),this._channel.on(U,this._onApiPause,this),this._channel.on(Y,this._onApiBufferStart,this),this._channel.on(j,this._onApiSeekStart,this),this._channel.on(K,this._onApiSeekComplete,this),this._channel.on(z,this._onApiChapterStart,this),this._channel.on(Q,this._onApiChapterComplete,this),this._channel.on($,this._onApiBitrateChange,this),this._channel.on(W,this._onApiTrackError,this),this._channel.on(G,this._onApiTrackInternalError,this),this._channel.on(X,this._onApiQuantumEnd,this),this._channel.on(J,this._onNetworkCheckStatusComplete,this),this._channel.reply(I,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},n.prototype._resetInternalState=function(){this._logger.debug(E,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new _,this._qosData=new g,this._sessionData=new l,this._assetData=new u,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},n.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},n.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},n.prototype._checkCall=function(e){return this._isTrackingSessionActive?this._isVideoComplete?(this._logger.warn(E,"#"+e+"() > The video content already completed."),!1):!0:(this._logger.warn(E,"#"+e+"() > No active tracking session."),!1)},n.prototype._updateLastInBandItem=function(e){var t=(new Date).getTime(),i=1e3*Math.abs(e.eventData.playhead()-this._lastInBandItem.eventData.playhead()),a=Math.abs(t-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=p.EVENT_TYPE_PAUSE?(a*ee>=i||this._doNotOverrideEventDuration)&&a<=this._reportingInterval*ee*1e3?this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()):(this._logger.warn(E,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+i+" tsDelta:"+a+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(t),this._lastInBandItem.eventData.playhead(e.eventData.playhead()),this._lastInBandItem.qosData.startupTime(e.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},n.prototype._sendHit=function(e){function t(e){var t=i._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(i._autoComputedStartupTime);var n={};n[N]=t,i._channel.trigger(new s(Z,n)),(t.eventData.type()==p.EVENT_TYPE_PLAY||t.eventData.type()==p.EVENT_TYPE_BUFFER||t.eventData.type()==p.EVENT_TYPE_START)&&(a={},a[C]=!0,i._channel.command(A,a))}var i=this,a={};switch(e.eventData.type()){case p.EVENT_TYPE_START:case p.EVENT_TYPE_PLAY:case p.EVENT_TYPE_PAUSE:case p.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==p.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==u.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),e!=this._lastInBandItem&&t(this._lastInBandItem)),t(e),this._lastInBandItem=e,a={},a[C]=!0,this._channel.command(A,a);break;case p.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(e.assetData.type()==u.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),e.assetData.type()==u.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,a={},a[C]=!0,this._channel.command(b,a)):e.assetData.type()==u.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(u.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case p.EVENT_TYPE_CHAPTER_START:case p.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==p.EVENT_TYPE_CHAPTER_START?new m(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),t(this._lastInBandItem));break;default:t(e)}};var E="ah::Context",D="sourceErrorSDK",P="error",A="clock:reporting.resume",b="clock:reporting.pause",S="reporting_interval",I="session_id",w="callback",N="report",C="reset",k="track_external_errors",M="reporting_interval",L="api:aa_start",R="api:aa_ad_start",B="api:video_load",O="api:video_unload",V="api:video_start",x="api:video_complete",H="api:ad_start",F="api:ad_complete",q="api:play",U="api:pause",Y="api:buffer_start",j="api:seek_start",K="api:seek_complete",z="api:chapter_start",Q="api:chapter_complete",W="api:track_error",G="api:track_internal_error",$="api:bitrate_change",X="api:quantum_end",Z="context:report_available",J="net:check_status_complete",ee=1.5,te=10;a.context.Context=n}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";function t(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp=i,this.sdk=i,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var i="unknown";e.AdobeHeartbeatPluginConfig=t}(t),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,i){"use strict";function a(e){a.__super__.constructor.call(this,f),this._radio=new l(this._logger),this._channel=this._radio.channel(D),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new u(this._channel,this._logger),this._setupDataResolver()}var n=e.Event,r=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Radio,h=t.ErrorInfo,c=t.Version,d=i.context.Context,p=i.filter.ReportFilter,u=i.network.Network,_=i.clock.Clock,g=i.AdobeHeartbeatPluginConfig;e.extend(a,o),a.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof g))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",i={};i[Q]=this._config.trackingServer,i[W]=t,i[G]=this._config.publisher,i[$]=this._config.quietMode,i[X]=this._config.ssl,this._channel.trigger(new n(ee,i)),this._isConfigured=!0},a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._channel.on(P,this._onError,this),this._clock=new _(this._pluginManager,this._channel,this._logger),this._channel.command(ye),this._channel.trigger(new n(Ee)),this._registerCommands(),this._registerBehaviours()},a.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},a.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):a.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},a.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new h("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(P,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},a.prototype._cmdAnalyticsStart=function(e){this._canProcess()&&this._channel.trigger(new n(Z,e))},a.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new n(J,e))},a.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new n(ie,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._filter.clear(),this._channel.trigger(new n(te,e)),this._isTrackingSessionActive=!0)},a.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new n(ie,e)),this._isTrackingSessionActive=!1)},a.prototype._cmdVideoStart=function(e){this._canProcess()&&this._channel.trigger(new n(ae,e))},a.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new n(ne,e))},a.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new n(le,e)),this._isPaused=!0)},a.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new n(re,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdComplete=function(e){this._canProcess()&&(this._channel.trigger(new n(oe,e)),e.isInAdBreak||this._resumePlaybackIfPossible(e))},a.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new n(he,e)),this._isBuffering=!0)},a.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new n(ce,e)),this._channel.trigger(new n(le,e)),this._isSeeking=!0)},a.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._channel.trigger(new n(de,e)),this._isSeeking=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new n(pe,e))},a.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new n(ue,e))},a.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new n(fe,e))},a.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new n(_e,e))},a.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new n(me,e))},a.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[K]=ve,t[z]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new n(ge,t));var i={};i[j]=!0,this._channel.command(Te,i),this._trigger(P,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},a.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick)},a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(y,S),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new r(y,I),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new r(y,w),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"rsid","rsid"),new s(v,"tracking_server","trackingServer"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"ssl","useSsl"),new s(T,"meta","metaNielsen"),new s(m,"publisher","publisher"),new s(m,"sdk","sdk"),new s(m,"ovp","ovp"),new s(m,"version","version"),new s(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new r(y,N),this,"handleVideoComplete",[new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,C),this,"handlePlay",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,k),this,"handlePause",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,M),this,"handleAdStart",[new s(y,"video.playhead","playhead"),new s(y,"ad.id","adId"),new s(y,"ad.name","adName"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"pod.name","podName"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"pod.startTime","podSecond"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd"),new s(T,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(y,L),this,"handleAdComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,R),this,"handleBufferStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,B),this,"handleBufferComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,O),this,"handleSeekStart",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new r(y,V),this,"handleSeekComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAd","isInAd"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"chapter.isInChapter","isInChapter"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),
this._pluginManager.registerBehaviour(new r(y,x),this,"handleChapterStart",[new s(y,"video.playhead","playhead"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.chapter.*","metaChapter"),new s(T,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(y,H),this,"handleChapterComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,F),this,"handleBitrateChange",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,q),this,"handleTrackError"),this._pluginManager.registerBehaviour(new r(E,Y),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(v,P),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new r(v,A),this,"handleAnalyticsStart",[new s(v,"vid","vid"),new s(v,"aid","aid"),new s(v,"mid","mid"),new s(v,"customerIDs","customerIDs"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(v,b),this,"handleAnalyticsAdStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")])},a.prototype._setupDataResolver=function(){var e={},t=this;e.version=function(){return c.getVersion()},e.api_level=function(){return c.getApiLevel()},e.tracking_server=function(){return t._config?t._config.trackingServer:null},e.publisher=function(){return t._config?t._config.publisher:null},e.quiet_mode=function(){return t._config?t._config.quietMode:!1},e.ovp=function(){return t._config?t._config.ovp:null},e.sdk=function(){return t._config?t._config.sdk:null},e.is_primetime=function(){return t._config?t._config.__isPrimetime:!1},e.psdk_version=function(){return t._config?t._config.__psdkVersion:null},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var n=t[a];i=i||{},i[n]=e.hasOwnProperty(n)?e[n].call(this):null}return i}},a.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||this._channel.trigger(new n(se,e))};var f="adobe-heartbeat",m=f,v="adobe-analytics",y="player",T="nielsen",E="service.clock",D="heartbeat-channel",P="error",A="aa_start",b="sc_ad_start",S="video_load",I="video_unload",w="video_start",N="video_complete",C="play",k="pause",M="ad_start",L="ad_complete",R="buffer_start",B="buffer_complete",O="seek_start",V="seek_complete",x="chapter_start",H="chapter_complete",F="bitrate_change",q="track_error",U="heartbeat.reporting",Y=U+".tick",j="reset",K="source",z="error_id",Q="tracking_server",W="check_status_server",G="publisher",$="quiet_mode",X="ssl",Z="api:aa_start",J="api:aa_ad_start",ee="api:config",te="api:video_load",ie="api:video_unload",ae="api:video_start",ne="api:video_complete",re="api:ad_start",oe="api:ad_complete",se="api:play",le="api:pause",he="api:buffer_start",ce="api:seek_start",de="api:seek_complete",pe="api:chapter_start",ue="api:chapter_complete",_e="api:track_error",ge="api:track_internal_error",fe="api:bitrate_change",me="api:quantum_end",ve="sourceErrorHeartbeat",ye="clock:check_status.resume",Te="clock:reporting.pause",Ee="clock:check_status.get_settings";i.AdobeHeartbeatPlugin=a}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),!function(e){if("undefined"==typeof t)var t={};!function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},i.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=i}(e.ADB.va,t),function(e){"use strict";function t(){this.channel=i,this.debugLogging=!1}var i="";e.AdobeAnalyticsPluginConfig=t}(t),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,i,a){"use strict";function n(e,t){if(n.__super__.constructor.call(this,m),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=e,this._delegate=t,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new c(!0,D),this._inputDataValidator=new f(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails()),this._trigger(P,e),this._delegate&&this._delegate.onError(this._errorInfo)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var r=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Channel,h=e.radio.Command,c=e.radio.CommandQueue,d=t.ErrorInfo,p=i.md5,u=i.StringUtils,_=i.ObjectUtils,g=a.AdobeAnalyticsPluginConfig,f=a.InputDataValidator;e.extend(n,o),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof g))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),n.__super__.setup.call(this)},n.prototype.setVideoMetadata=function(e){this._videoMetadata=_.clone(e)},n.prototype.setAdMetadata=function(e){this._adMetadata=_.clone(e)},n.prototype.setChapterMetadata=function(e){this._chapterMetadata=_.clone(e)},n.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):n.__super__._canProcess.call(this)},n.prototype._cmdVideoLoad=function(e){this._errorInfo=null},n.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new h(this._executeOpen,this,[e]))},n.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new h(this._executeOpenAd,this,[e]))},n.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new d("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(P,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},n.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var e=0;e<this._customMetaKeys.length;e++){var t=this._customMetaKeys[e];delete this._appMeasurement.contextData[t]}this._customMetaKeys=[]},n.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playerName"])){this._resetAppMeasurementContextData();for(var t in e.metaVideo)e.metaVideo.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaVideo[t],this._customMetaKeys.push(t));if(e.metaNielsen)for(var t in e.metaNielsen)e.metaNielsen.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaNielsen[t],this._customMetaKeys.push(t));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.pev3=A,this._appMeasurement.pe=e.isPrimetime?I:S,this._appMeasurement.track();var i=this;setTimeout(function(){i._trigger(C,e)},0)}},n.prototype._executeOpenAd=function(e){var t=p(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond,this._resetAppMeasurementContextData();var i;for(i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(this._appMeasurement.contextData[i]=e.metaVideo[i],this._customMetaKeys.push(i));for(i in e.metaAd)e.metaAd.hasOwnProperty(i)&&(this._appMeasurement.contextData[i]=e.metaAd[i],this._customMetaKeys.push(i));if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(this._appMeasurement.contextData[i]=e.metaNielsen[i],this._customMetaKeys.push(i));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.ad.name"]=e.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=e.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=e.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=e.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=t,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=b,this._appMeasurement.pe=e.isPrimetime?N:w,this._appMeasurement.track();var a=this;setTimeout(function(){a._trigger(k,e)},0)}},n.prototype._setupDataResolver=function(){var e={},t=this;e.rsid=function(){return t._appMeasurement.account},e.tracking_server=function(){return t._appMeasurement.ssl&&t._appMeasurement.trackingServerSecure?t._appMeasurement.trackingServerSecure:t._appMeasurement.trackingServer},e.ssl=function(){return t._appMeasurement.ssl},e.vid=function(){return t._appMeasurement.visitorID},e.aid=function(){return t._appMeasurement.analyticsVisitorID},e.mid=function(){return t._appMeasurement.marketingCloudVisitorID},e.customerIDs=function(){var e=t._appMeasurement.visitor.getCustomerIDs(),i={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if("object"==typeof n){for(var r in n)n.hasOwnProperty(r)&&("authState"==r?i[a+".as"]=n[r]:i[a+"."+r]=n[r]);i[a+".as"]||(i[a+".as"]="0")}}return i},e.channel=function(){return t._config?t._config.channel:null},e.meta=function(e){var i=e.split(".");if(i.length<2)return null;var a=i.shift();switch(e=i.join("."),a){case"video":return e==l.WILDCARD?t._videoMetadata:t._videoMetadata[e];case"ad":return e==l.WILDCARD?t._adMetadata:t._adMetadata[e];case"chapter":return e==l.WILDCARD?t._chapterMetadata:t._chapterMetadata[e];default:return null}},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var n=t[a];i=i||{},u.startsWith(n,"meta.")?i[n]=e.meta(n.split("meta.")[1]):i[n]=e.hasOwnProperty(n)?e[n].call(this):null}return i}},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(T,M),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new r(T,L),this,"handleVideoStart",[new s(T,"video.id","videoId"),new s(T,"video.streamType","streamType"),new s(T,"video.name","videoName"),new s(T,"video.length","videoLength"),new s(T,"video.playerName","playerName"),new s(T,"video.streamType","streamType"),new s(E,"is_primetime","isPrimetime"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(T,R),this,"handleAdStart",[new s(T,"video.id","videoId"),new s(T,"video.streamType","streamType"),new s(T,"video.playhead","playhead"),new s(T,"video.playerName","playerName"),new s(T,"ad.id","adId"),new s(T,"ad.length","adLength"),new s(T,"ad.position","adPosition"),new s(T,"ad.name","adName"),new s(T,"pod.name","podName"),new s(T,"pod.position","podPosition"),new s(T,"pod.playerName","podPlayerName"),new s(T,"pod.startTime","podSecond"),new s(E,"is_primetime","isPrimetime"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(E,P),this,"handleHeartbeatPluginError")},n.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var m="adobe-analytics",v=m,y="nielsen",T="player",E="adobe-heartbeat",D=2e3,P="error",A="video",b="videoAd",S="ms_s",I="msp_s",w="msa_s",N="mspa_s",C="aa_start",k="sc_ad_start",M="video_load",L="video_start",R="ad_start";a.AdobeAnalyticsPlugin=n}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this)};e.call(window)}(),function(){"use strict";function e(){this._events={}}function t(){return t.prototype._instance||(t.prototype._instance=new e),t.prototype._instance}window.HBConfiguration={PLAYER:{NAME:"PDK HEARTBEAT",VIDEO_ID:"TEST",VIDEO_NAME:"TEST HARNESS VIDEO"},HEARTBEAT:{TRACKING_SERVER:"hb-fa-1.omtrdc.net",PUBLISHER:"ewscripps",CHANNEL:"",OVP:"",SDK:""}},e.prototype.addEventListener=function(e,t,i){e&&t&&(i=i||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:i}))},e.prototype.removeEventListener=function(e,t,i){if(e&&t){i=i||window;var a,n,r=!1;for(n in this._events)if(e===n){r=!0;break}if(r){for(a=this._events[n].length-1;a>=0;a--){var o=this._events[n][a];t===o.cb&&i===o.ctx&&this._events[n].splice(a,1)}this._events[n].length||delete this._events[n]}}},e.prototype.dispatchEvent=function(e){if(e){var t,i;for(t in this._events)if(this._events.hasOwnProperty(t)&&e===t){var a=this._events[t],n=a.slice(0),r=n.length;for(i=0;r>i;i++)n[i].cb.call(n[i].ctx);break}}},window.NotificationCenter=t}(),function(){"use strict";function e(){}function t(){}function i(){}function a(e){this._player=e}function n(n){if(!n)throw new Error("Illegal argument. Player reference cannot be null.");this._player=n,this._playerPlugin=new p(new a(this._player));var r=new u;r.debugLogging="object"==typeof SNI&&"object"==typeof SNI.Analytics?SNI.Analytics.debugFlag:!1,this._playerPlugin.configure(r),s.account=s.account||s.fun,this._aaPlugin=new _(s,new i);var o=new g;o.channel=HBConfiguration.HEARTBEAT.CHANNEL,o.debugLogging="object"==typeof SNI&&"object"==typeof SNI.Analytics?SNI.Analytics.debugFlag:!1,this._aaPlugin.configure(o);var l=new f(new t),h=new m(HBConfiguration.HEARTBEAT.TRACKING_SERVER,HBConfiguration.HEARTBEAT.PUBLISHER);h.ovp=HBConfiguration.HEARTBEAT.OVP,h.sdk=HBConfiguration.HEARTBEAT.SDK,h.debugLogging="object"==typeof SNI&&"object"==typeof SNI.Analytics?SNI.Analytics.debugFlag:!1,l.configure(h);var v=[this._playerPlugin,this._aaPlugin,l];this._heartbeat=new c(new e,v);var y=new d;y.debugLogging="object"==typeof SNI&&"object"==typeof SNI.Analytics?SNI.Analytics.debugFlag:!1,this._heartbeat.configure(y),SNI.Analytics.debugLog("config _heartbeat"),SNI.Analytics.debugLog(y),this._installEventListeners()}var r=ADB.va.HeartbeatDelegate,o=ADB.va.plugins.ah.AdobeHeartbeatPluginDelegate,l=ADB.va.plugins.aa.AdobeAnalyticsPluginDelegate,h=ADB.va.plugins.videoplayer.VideoPlayerPluginDelegate;$.extend(e.prototype,r.prototype),e.prototype.onError=function(e){},$.extend(t.prototype,o.prototype),t.prototype.onError=function(e){},$.extend(i.prototype,l.prototype),i.prototype.onError=function(e){},$.extend(a.prototype,h.prototype),a.prototype.getVideoInfo=function(){return SNI.Analytics.debugLog("Calling SNI.Analytics.getVideoInfo"),SNI.Analytics.debugLog(this._player),SNI.Analytics.getVideoInfo(this._player)},a.prototype.getAdBreakInfo=function(){return SNI.Analytics.getAdBreakInfo(this._player)},a.prototype.getAdInfo=function(){return SNI.Analytics.getAdInfo(this._player)},a.prototype.getChapterInfo=function(){return SNI.Analytics.getChapterInfo(this._player)},a.prototype.getQoSInfo=function(){return SNI.Analytics.getQoSInfo(this._player)};var c=ADB.va.Heartbeat,d=ADB.va.HeartbeatConfig,p=ADB.va.plugins.videoplayer.VideoPlayerPlugin,u=ADB.va.plugins.videoplayer.VideoPlayerPluginConfig,_=ADB.va.plugins.aa.AdobeAnalyticsPlugin,g=ADB.va.plugins.aa.AdobeAnalyticsPluginConfig,f=ADB.va.plugins.ah.AdobeHeartbeatPlugin,m=ADB.va.plugins.ah.AdobeHeartbeatPluginConfig;n.prototype.destroy=function(){this._player&&(this._heartbeat.destroy(),this._heartbeat=null,this._uninstallEventListeners(),this._player=null)},n.prototype._onLoad=function(){SNI.Analytics.debugLog("Player event: VIDEO_LOAD"),this._playerPlugin.trackVideoLoad()},n.prototype._onUnload=function(){SNI.Analytics.debugLog("Player event: VIDEO_UNLOAD"),this._playerPlugin.trackVideoUnload()},n.prototype._onPlay=function(){SNI.Analytics.debugLog("Player event: PLAY"),SNI.Analytics.debugLog(this),this._playerPlugin.trackPlay()},n.prototype._onPause=function(){SNI.Analytics.debugLog("Player event: PAUSE"),SNI.Analytics.debugLog(this),this._playerPlugin.trackPause()},n.prototype._onSeekStart=function(){SNI.Analytics.debugLog("Player event: SEEK_START"),this._playerPlugin.trackSeekStart()},n.prototype._onSeekComplete=function(){SNI.Analytics.debugLog("Player event: SEEK_COMPLETE"),this._playerPlugin.trackSeekComplete()},n.prototype._onBufferStart=function(){SNI.Analytics.debugLog("Player event: BUFFER_START"),this._playerPlugin.trackBufferStart()},n.prototype._onBufferComplete=function(){SNI.Analytics.debugLog("Player event: BUFFER_COMPLETE"),this._playerPlugin.trackBufferComplete()},n.prototype._onAdStart=function(){SNI.Analytics.debugLog("Player event: AD_START"),this._playerPlugin.trackAdStart()},n.prototype._onAdComplete=function(){SNI.Analytics.debugLog("Player event: AD_COMPLETE"),this._playerPlugin.trackAdComplete()},n.prototype._onChapterStart=function(){SNI.Analytics.debugLog("Player event: CHAPTER_START"),this._aaPlugin.setChapterMetadata({segmentType:"SNI segment type"}),this._playerPlugin.trackChapterStart()},n.prototype._onChapterComplete=function(){SNI.Analytics.debugLog("Player event: CHAPTER_COMPLETE"),this._playerPlugin.trackChapterComplete()},n.prototype._onComplete=function(){SNI.Analytics.debugLog("Player event: COMPLETE"),this._playerPlugin.trackComplete(function(){SNI.Analytics.debugLog("The completion of the content has been tracked.")})},n.prototype._installEventListeners=function(){NotificationCenter().addEventListener(HBPlayerEvent.VIDEO_LOAD,this._onLoad,this),NotificationCenter().addEventListener(HBPlayerEvent.VIDEO_UNLOAD,this._onUnload,this),NotificationCenter().addEventListener(HBPlayerEvent.PLAY,this._onPlay,this),NotificationCenter().addEventListener(HBPlayerEvent.PAUSE,this._onPause,this),NotificationCenter().addEventListener(HBPlayerEvent.SEEK_START,this._onSeekStart,this),NotificationCenter().addEventListener(HBPlayerEvent.SEEK_COMPLETE,this._onSeekComplete,this),NotificationCenter().addEventListener(HBPlayerEvent.BUFFER_START,this._onBufferStart,this),NotificationCenter().addEventListener(HBPlayerEvent.BUFFER_COMPLETE,this._onBufferComplete,this),NotificationCenter().addEventListener(HBPlayerEvent.AD_START,this._onAdStart,this),NotificationCenter().addEventListener(HBPlayerEvent.AD_COMPLETE,this._onAdComplete,this),NotificationCenter().addEventListener(HBPlayerEvent.CHAPTER_START,this._onChapterStart,this),NotificationCenter().addEventListener(HBPlayerEvent.CHAPTER_COMPLETE,this._onChapterComplete,this),NotificationCenter().addEventListener(HBPlayerEvent.COMPLETE,this._onComplete,this)},n.prototype._uninstallEventListeners=function(){NotificationCenter().removeEventListener(HBPlayerEvent.VIDEO_LOAD,this._onLoad,this),NotificationCenter().removeEventListener(HBPlayerEvent.VIDEO_UNLOAD,this._onUnload,this),NotificationCenter().removeEventListener(HBPlayerEvent.PLAY,this._onPlay,this),NotificationCenter().removeEventListener(HBPlayerEvent.PAUSE,this._onPause,this),NotificationCenter().removeEventListener(HBPlayerEvent.SEEK_START,this._onSeekStart,this),NotificationCenter().removeEventListener(HBPlayerEvent.SEEK_COMPLETE,this._onSeekComplete,this),NotificationCenter().removeEventListener(HBPlayerEvent.BUFFER_START,this._onBufferStart,this),NotificationCenter().removeEventListener(HBPlayerEvent.BUFFER_COMPLETE,this._onBufferComplete,this),NotificationCenter().removeEventListener(HBPlayerEvent.AD_START,this._onAdStart,this),NotificationCenter().removeEventListener(HBPlayerEvent.AD_COMPLETE,this._onAdComplete,this),NotificationCenter().removeEventListener(HBPlayerEvent.CHAPTER_START,this._onChapterStart,this),NotificationCenter().removeEventListener(HBPlayerEvent.CHAPTER_COMPLETE,this._onChapterComplete,this),NotificationCenter().removeEventListener(HBPlayerEvent.COMPLETE,this._onComplete,this)},window.SNIHeartbeatDelegate=e,window.SNIAdobeHeartbeatPluginDelegate=t,window.SNIAdobeAnalyticsPluginDelegate=i,window.SNIVideoPlayerPluginDelegate=a,window.VideoAnalyticsProvider=n,window.HBPlayerEvent={VIDEO_LOAD:"video_load",VIDEO_UNLOAD:"video_unload",PLAY:"play",PAUSE:"pause",COMPLETE:"COMPLETE",BUFFER_START:"buffer_start",BUFFER_COMPLETE:"buffer_complete",SEEK_START:"seek_start",SEEK_COMPLETE:"seek_complete",AD_START:"ad_start",AD_COMPLETE:"ad_complete",CHAPTER_START:"chapter_start",CHAPTER_COMPLETE:"chapter_complete"}}(),SNI=window.SNI||{},SNI.Analytics=window.SNI.Analytics||{},SNI.Analytics.debugFlag=!1;try{SNI.Analytics.debugFlag="true"==localStorage.sdsat_debug?!0:!1}catch(e){}SNI.Analytics.debugLog=function(e){SNI.Analytics.debugFlag&&"object"==typeof console&&console.log(e)},SNI.Analytics.startThirdPartyTracking=function(e){var t=new Image,i=Math.ceil(1e9*Math.random()),a="http://secure-us.imrworldwide.com/cgi-bin/m?ci=us-200639",n=mdManager.getParameterString("showTitle"),r=mdManager.getParameterString("videoTitle"),o={food:["Food Network","Food Network"],foodcom:["Food.com","*null"],gac:["Great American Country","Great American Country"],hgtv:["HGTV","HGTV"],diy:["DIY Network","DIY Network"],cook:["Cooking Channel","Cooking Channel"],travel:["Travel Channel","Travel Channel"]},s="undefined"!=typeof sniSite?sniSite:mdManager.getParameterString("site");""!=n?a+="&cg="+n:l+="&c4="+mdManager.getParameterString("Title"),a+="&tl=dav0-"+r,a+="&c6=vc,c16",a+="&cc=1",a+="&rnd="+i,t="",t=new Image,t.src=a;var l,h=new Image;if(l="http://b.scorecardresearch.com/p?c1=1&c2=6035648",l+="&c3="+s_account,l+=""!=n?"&c4="+n:"&c4="+escape("No Show Title"),""!=mdManager.getParameterString("videoAdTitle"))l+="&c5=01&c10=01-01";else{var c=mdManager.getParameterString("videoRunTime");c=Math.floor(parseFloat(c));var d=c>480?"03":"02";l+="&c5="+d+"&c10=01-01"}l+="&ns_st_st="+(o[s]?o[s][0]:"*null"),l+="&ns_st_pu="+(o[s]?o[s][1]:"*null"),l+="&ns_st_pr="+mdManager.getParameterString("showTitle"),l+="&ns_st_ep="+mdManager.getParameterString("videoTitle"),l+="&ns_st_sn="+(e.currentVideo&&e.currentVideo.season?("0"+e.currentVideo.season).slice(-2):"*null"),l+="&ns_st_en="+(e.currentVideo&&e.currentVideo.episodeNumber?("0"+e.currentVideo.episodeNumber).slice(-2):"*null"),l+="&ns_st_ge=Lifestyle",h="",h=new Image,h.src=l},SNI.Analytics.endThirdPartyTracking=function(){var e,t=new Image,i=Math.ceil(1e9*Math.random());e="http://secure-us.imrworldwide.com/cgi-bin/m?ci=us-200639";var a=mdManager.getParameterString("showTitle"),n=mdManager.getParameterString("videoTitle");e+=""!=a?"&cg="+a:"&cg="+escape("No Show Title"),e+="&tl=dav2-"+n,e+="&c6=vc,c16",e+="&cc=1",e+="&rnd="+i,t="",t=new Image,t.src=e},SNI.Analytics.getVideoInfo=function(e){var t=new ADB.va.plugins.videoplayer.VideoInfo;return SNI.Analytics.debugLog("Getting videoInfo"),t.playerName="PDK : "+SNI.Video.Util.getRuntime(),e.playing?(t.id=mdManager.getParameterString("videoSCRID")+(mdManager.getParameterString("videoWindowing")&&"|"+mdManager.getParameterString("videoWindowing")),SNI.Analytics.debugLog(e.$container.selector+" scrid is "+mdManager.getParameterString("videoSCRID"))):SNI.Analytics.debugLog(e.$container.selector+" was falsey"),t.name=mdManager.getParameterString("showTitle")+"|"+mdManager.getParameterString("videoTitle"),t.length=Math.round(mdManager.getParameterString("videoRunTime")),t.playhead=e.playhead||0,t.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_VOD,SNI.Analytics.debugLog("Returning videoInfo"),SNI.Analytics.debugLog(t),t},SNI.Analytics.getAdBreakInfo=function(e){var t={},i=1,a=[],n="preroll";return e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&e.eventData.baseClip.guid&&(a=e.eventData.baseClip.guid.match(/midroll_(\d)/),a&&a[1]&&(n="midroll",i=parseInt(a[1],10))),e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&"object"==typeof e.eventData.baseClip.contentCustomData&&"string"==typeof e.eventData.baseClip.contentCustomData["fw:customData"]&&e.eventData.baseClip.contentCustomData["fw:customData"].match("midroll")&&(n="midroll"),t.playerName="PDK : "+SNI.Video.Util.getRuntime(),t.name=n,t.position=i,t},SNI.Analytics.getAdInfo=function(e){var t,i={};return e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&e.eventData.baseClip.guid&&(t=e.eventData.baseClip.guid.split(":"),t=Array.isArray(t)&&t[1]?parseInt(t[1],10)+1:1),i.id=e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip?e.eventData.id:null,i.length=e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&!isNaN(e.eventData.length)?Math.round(e.eventData.length/1e3):-1,i.position=t,i.name=e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&"object"==typeof e.eventData.baseClip.contentCustomData&&"string"==typeof e.eventData.baseClip.contentCustomData["fw:customData"]?e.eventData.baseClip.contentCustomData["fw:customData"]:null,SNI.Analytics.debugLog("Returning adInfo"),SNI.Analytics.debugLog(i),i},SNI.Analytics.getChapterInfo=function(e){var t=new ADB.va.plugins.videoplayer.ChapterInfo;return"object"==typeof e.eventData?(t.name=(e.eventData.chapter.title?e.eventData.chapter.title:mdManager.getParameterString("showTitle"))+"|"+e.eventData.chapter.index,t.length=Math.round(e.eventData.chapter.length/1e3),t.position=e.eventData.chapter.index+1,t.startTime=Math.round(e.eventData.chapter.startTime/1e3)):(t.position=1,
t.startTime=0,t.length=Math.round(mdManager.getParameterString("videoRunTime"))),t},SNI.Analytics.getQoSInfo=function(e){var t=new ADB.va.plugins.videoplayer.QoSInfo;return SNI.Analytics.debugLog("getQoSInfo"),SNI.Analytics.debugLog(e),t.bitrate=e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&!isNaN(e.eventData.baseClip.bitrate)?e.eventData.baseClip.bitrate:null,t.fps=e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&!isNaN(e.eventData.baseClip.frameRate)?e.eventData.baseClip.frameRate:null,t.droppedFrames=null,t.startupTime=e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip?e.eventData.baseClip.loadTime:null,t},SNI.Analytics.trackedPlayers=[],SNI.Analytics.resovleActivePlayer=function(e){for(var t=SNI.Analytics.trackedPlayers.length||0;t--;)SNI.Analytics.trackedPlayers[t].$container.selector!==e.$container.selector&&(SNI.Analytics.trackedPlayers[t].playing=!1,SNI.Analytics.trackedPlayers[t].activeSession=!1);e.activeId!==mdManager.getParameterString("videoSCRID")&&(e.playing=!1,e.activeSession=!1,e.blockduplicate=!1)},SNI.Analytics.resetTrackingEvars=function(){s.eVar16="",s.eVar17="",s.eVar18="",s.eVar19="",s.eVar40=""},SNI.Analytics.heartbeatInit=function(e){HBConfiguration.HEARTBEAT.CHANNEL=s.channel,HBConfiguration.HEARTBEAT.OVP=mdManager.getParameterString("site")||"SNI",HBConfiguration.HEARTBEAT.SDK="js-v1.5.4.34(sni-1.2.1)";var t=new VideoAnalyticsProvider(e),i=function(){t._aaPlugin.setVideoMetadata({videoPlayerType:mdManager.getParameterString("videoPlayerType")+":heartbeat:"+e.getVideoType(),videoTitle:mdManager.getParameterString("videoTitle"),showTitle:mdManager.getParameterString("showTitle"),videoPlayerName:mdManager.getParameterString("videoPlayerName"),videoChannelName:mdManager.getParameterString("videoChannelName"),videoPublisherID:mdManager.getParameterString("videoPublisherID"),videoPlayType:mdManager.getParameterString("videoPlayType"),videoNLVID:mdManager.getParameterString("videoNLVID"),videoSCRID:mdManager.getParameterString("videoSCRID"),videoCMSID:mdManager.getParameterString("videoCMSID"),videoGUID:mdManager.getParameterString("videoGUID"),videoRunTime:mdManager.getParameterString("videoRunTime")&&-1===mdManager.getParameterString("videoRunTime").indexOf(":")?Math.round(mdManager.getParameterString("videoRunTime")):mdManager.getParameterString("videoRunTime"),videoScreenType:mdManager.getParameterString("videoScreenType"),videoSponsor:mdManager.getParameterString("videoSponsor"),videoMVPD:mdManager.getParameterString("videoMVPDProvider")?mdManager.getParameterString("videoMVPDProvider").replace("AUTH_",""):"mvpd not required",videoWindowing:mdManager.getParameterString("videoWindowing"),videoSiteSection:mdManager.getParameterString("CategoryDspName")&&mdManager.getParameterString("CategoryDspName").toLowerCase(),videoSponsorship:mdManager.getParameterString("Sponsorship")?mdManager.getParameterString("Sponsorship"):"no sponsorship",editorialTracking:mdManager.getParameterString("EditorialTracking")?mdManager.getParameterString("EditorialTracking"):"no editorial tracking"})};window.testpointer=t,SNI.Analytics.trackedPlayers.push(e),e.subscribe("OnMediaStart",function(t){return clearTimeout(SNI.Analytics.playerTimeout),SNI.Analytics.debugLog("OnMediaStart"),SNI.Analytics.debugLog(t.data),SNI.Analytics.debugLog("Received a OnMediaStart event from "+e.config.player.containerId),SNI.Analytics.resovleActivePlayer(e),e.blockduplicate?void(e.blockduplicate=!1):(e.blockduplicate=!0,e.eventData=t.data,e.playing=!0,e.starttime=(new Date).getTime(),e.activeId=mdManager.getParameterString("videoSCRID"),SNI.Analytics.resetTrackingEvars(),s.linkTrackVars="",s.events="","function"==typeof s.trackFromLS&&s.trackFromLS(),"function"==typeof s.trackModLocalStorage&&s.trackModLocalStorage(),i(),e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&e.eventData.baseClip.isAd?(e.activeSession||(SNI.Analytics.debugLog("Called NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_LOAD); 1"),NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_LOAD),e.activeSession=!0),SNI.Analytics.debugLog("Called NotificationCenter().dispatchEvent(HBPlayerEvent.AD_START);"),NotificationCenter().dispatchEvent(HBPlayerEvent.AD_START)):(e.activeSession||(NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_LOAD),SNI.Analytics.debugLog("Called NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_LOAD); 2"),e.activeSession=!0),0===e.eventData.chapter.startTime&&(NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_START),SNI.Analytics.debugLog("Called NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_START);")),NotificationCenter().dispatchEvent(HBPlayerEvent.CHAPTER_START),SNI.Analytics.debugLog("Called NotificationCenter().dispatchEvent(HBPlayerEvent.CHAPTER_START);")),SNI.Analytics.startThirdPartyTracking(e),NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.PLAY),s.contextData={},s.linkTrackVars="",void(s.events=""))},e.config.player.containerId),e.subscribe("OnMediaPause",function(){e.playing=!1,clearTimeout(SNI.Analytics.playerTimeout),NotificationCenter().dispatchEvent(HBPlayerEvent.PAUSE)},e.config.player.containerId),e.subscribe("OnMediaUnpause",function(){SNI.Analytics.resovleActivePlayer(e),e.playing=!0,e.activeId=mdManager.getParameterString("videoSCRID"),i(),e.activeSession||(NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_LOAD),NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_START),e.activeSession=!0),NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.PLAY)},e.config.player.containerId),e.subscribe("OnMediaEnd",function(){SNI.Analytics.debugLog("OnMediaEnd"),clearTimeout(SNI.Analytics.playerTimeout),e.blockduplicate=!1,e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&e.eventData.baseClip.isAd?(NotificationCenter().dispatchEvent(HBPlayerEvent.AD_COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_START),e.playing=!1):e.eventData&&"object"==typeof e.eventData&&e.eventData.chapter.endTime!==e.eventData.chapter.chapters.aggregateLength?(NotificationCenter().dispatchEvent(HBPlayerEvent.CHAPTER_COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_START),e.playing=!1):(new Date).getTime()-e.starttime<3e3?NotificationCenter().dispatchEvent(HBPlayerEvent.TRACK_ERROR):(NotificationCenter().dispatchEvent(HBPlayerEvent.COMPLETE),e.activeSession=!1),SNI.Analytics.endThirdPartyTracking()},e.config.player.containerId),e.subscribe("OnMediaComplete",function(t){(new Date).getTime()-e.starttime<3e3?NotificationCenter().dispatchEvent(HBPlayerEvent.TRACK_ERROR):(SNI.Analytics.debugLog("OnMediaComplete"),SNI.Analytics.debugLog(t),e.playing=!1,clearTimeout(SNI.Analytics.playerTimeout),e.eventData&&"object"==typeof e.eventData&&"object"==typeof e.eventData.baseClip&&e.eventData.baseClip.isAd?SNI.Analytics.debugLog("OnMediaComplete - isAd - no event dispatched"):(NotificationCenter().dispatchEvent(HBPlayerEvent.COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.VIDEO_UNLOAD),SNI.Analytics.endThirdPartyTracking(),e.activeSession=!1))},e.config.player.containerId),e.subscribe("OnMediaSeek",function(){NotificationCenter().dispatchEvent(HBPlayerEvent.PLAY)},e.config.player.containerId),e.subscribe("OnMediaPlay",function(){SNI.Analytics.debugLog("OnMediaPlay"),NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.PLAY)},e.config.player.containerId),e.subscribe("OnMediaBuffering",function(){SNI.Analytics.debugLog("OnMediaBuffering"),NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_START),e.playing=!1},e.config.player.containerId),e.subscribe("OnMediaPlaying",function(t){e.playhead=parseInt(t.data.currentTimeAggregate/1e3,10)||parseInt(t.data.currentTime/1e3,10),e.playheadChapter=parseInt(t.data.currentTime/1e3,10),clearTimeout(SNI.Analytics.playerTimeout),e.activeId!==mdManager.getParameterString("videoSCRID")&&(SNI.Analytics.resovleActivePlayer(e),e.activeId=mdManager.getParameterString("videoSCRID"),i()),e.playing===!1&&(e.playing=!0,NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_COMPLETE),NotificationCenter().dispatchEvent(HBPlayerEvent.PLAY)),SNI.Analytics.playerTimeout=setTimeout(function(){NotificationCenter().dispatchEvent(HBPlayerEvent.BUFFER_START),e.playing=!1},500)},e.config.player.containerId)};
});
